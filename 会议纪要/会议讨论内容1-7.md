李老师，您好，我这边是云医购于磊。
我想跟您再确认下昨天提的销售发票接口的需求。

昨天会议上有几个待确认点：

待确认点一：YS&税务云_YS融合版本的功能性影响。

> ​	指的是目前YS与yonsuite税务服务融合版本，在流程：销售出库单下推销售发票，销售发票会自动去开出税票吗？还是说这边是可配置去开税票的？
>
> ​	

待确认点二：对于销售发票对接，可能涉及到新增开发。新增一个销售发票生成接口（明细对接，倒推关联出库单）

> 昨天我们聊的流程里面，发票接口是非doc-api下的销售发票保存接口。
>
> 而是说会新增一个发票生成对接接口，这个接口中我会把引用的开票出库单信息传递，是出库单明细级别的，
>
> 用这个出库单去替换原调用出库单下推开票。最终我们还是用这个方案吗。
>
> 就我个人理解，昨天会议提的这个新增接口比调用出库单下推开票的接口更适配。

待确认点三：针对对接接口本身的参数结构问题

> 小强老师回复：
>
> 	1、流程ID是与销售出库单相同的，来源等信息是要我们系统中销售出库单的主键与子表主键等信息，这个当时定接口的时候已经说过要外部系统传递正确，否则ys系统无法建立与出库单的关联回写关系。
> 	2、其他的基础档案ID可以通过吴铁英说的预制code映射关系，传递ys系统中的档案code系统实现ID转换。
>
>  
>
> 
>
> a. 本币ID、汇率类型ID、汇率：这些字段是否有YS字典项默认值，由YS自身取默认值解析
>
> b. 流程ID：这边回复的理解是不是可以认为只要传输出库单&明细的明细id即可，这个流程id是YS自身可以查找到的。
>
> c. 发票类型对接字典：这个发票类型是YS平台永远不变的，还是有什么对接接口要处理；
>
> d. 客户ID、SkuID：用code映射。
>
> e. 交易类型ID：目前云医购系统已经对照。
>
> f. 开票组织ID ：目前云医购系统已经对照。



待确认点四：销售发票这些问题对接，采购发票也同理。麻烦老师想想接口是否支持，还是要跟销售发票同步一个逻辑，需要重写一个明细对接接口

![image-20210105131445469](/Users/rayyu/Library/Application Support/typora-user-images/image-20210105131445469.png)









